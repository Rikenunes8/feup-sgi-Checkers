<sxs>
    <scene root="feup" axis_length="10"/>
    <views default="FEUP">
      <perspective id="FEUP" near="0.1" far="500" angle="45">
        <from x="20" y="20" z="30" />
        <to x="0" y="0" z="0" />
      </perspective>
    </views>

    
    <ambient>
      <ambient r="0.2" g="0.2" b="0.2" a="1.0" />
      <background r="0.0" g="0.0" b="0.1" a="1.0" />
    </ambient>

    <lights>
      <omni id="Moon" enabled="1">
        <location x="30" y="25" z="40" w="1.0" />
        <ambient r="0.4" g="0.36" b="0.32" a="1.0" />
        <diffuse r="1.0" g="0.9" b="0.8" a="1.0" />
        <specular r="0.5" g="0.45" b="0.4" a="1.0" />
        <attenuation constant="1" linear="0" quadratic="0" />
      </omni>
    </lights>
    
    <textures>
      <texture id="test" file="scenes/images/nurbTest.png" />
    </textures>

    <materials>
      <material id="moon" shininess="1000">
        <emission r="1.0" g="1.0" b="1.0" a="1.0" />
        <ambient r="1.0" g="1.0" b="1.0" a="1" />
        <diffuse r="1.0" g="1.0" b="1.0" a="1.0" />
        <specular r="0.0" g="0.0" b="0.0" a="1.0" />
      </material>
    </materials>

    <transformations>
      <transformation id="stairsStep">
        <translate x="0" y="1" z="-1" />
      </transformation>
    </transformations>
    <primitives>
      <primitive id="patch1">
        <patch degree_u="1" parts_u="20" degree_v="1" parts_v="20" >
            <controlpoint x="-2.0" y="-2.0" z="0.0" w="1.0"/>
            <controlpoint x="-2.0" y="2.0" z="0.0" w="1.0"/>
            <controlpoint x="2.0" y="-2.0" z="0.0" w="1.0"/>
            <controlpoint x="2.0" y="2.0" z="0.0" w="1.0"/>
        </patch>
      </primitive>
      <primitive id="patch2">
        <patch degree_u="2" parts_u="20" degree_v="1" parts_v="20" >
            <controlpoint x="-1.5" y="-1.5" z="0.0" w="1.0"/>
            <controlpoint x="-1.5" y="1.5" z="0.0" w="1.0"/>
            <controlpoint x="0" y="-1.5" z="3.0" w="1.0"/>
            <controlpoint x="0" y="1.5" z="3.0" w="1.0"/>
            <controlpoint x="1.5" y="-1.5" z="0.0" w="1.0"/>
            <controlpoint x="1.5" y="1.5" z="0.0" w="1.0"/>
        </patch>
      </primitive>
      <primitive id="patch3">
        <patch degree_u="2" parts_u="20" degree_v="3" parts_v="20" >
            <controlpoint x="-1.5" y="-1.5" z="0.0" w="1.0" />
            <controlpoint x="-2.0" y="-2.0" z="2.0" w="1.0"/>
            <controlpoint x="-2.0" y="2.0" z="2.0" w="1.0"/>
            <controlpoint x="-1.5" y="1.5" z="0.0" w="1.0"/>

            <controlpoint x="0" y="0" z="3.0" w="1.0"/>
            <controlpoint x="0" y="-2.0" z="3.0" w="5.0"/>
            <controlpoint x="0" y="2.0" z="3.0" w="5.0"/>
            <controlpoint x="0" y="0" z="3.0" w="1.0"/>

            <controlpoint x="1.5" y="-1.5" z="0.0" w="1.0"/>
            <controlpoint x="2.0" y="-2.0" z="2.0" w="1.0"/>
            <controlpoint x="2.0" y="2.0" z="2.0" w="1.0"/>
            <controlpoint x="1.5" y="1.5" z="0.0" w="1.0"/>
        </patch>
      </primitive>
      <primitive id="patch4">
        <patch degree_u="2" parts_u="20" degree_v="3" parts_v="20" >
            <controlpoint x="-2.0" y="-2.0" z="1.0" w="1.0" />
            <controlpoint x="-2.0" y="-1.0" z="-2.0" w="1.0"/>
            <controlpoint x="-2.0" y="1.0" z="5.0" w="1.0"/>
            <controlpoint x="-2.0" y="2.0" z="-1.0" w="1.0"/>

            <controlpoint x="0" y="-2.0" z="0" w="1.0"/>
            <controlpoint x="0" y="-1.0" z="-1.0" w="5.0"/>
            <controlpoint x="0" y="1.0" z="1.5" w="5.0"/>
            <controlpoint x="0" y="2.0" z="0" w="1.0"/>

            <controlpoint x="2.0" y="-2.0" z="-1.0" w="1.0"/>
            <controlpoint x="2.0" y="-1.0" z="2.0" w="1.0"/>
            <controlpoint x="2.0" y="1.0" z="-5.0" w="1.0"/>
            <controlpoint x="2.0" y="2.0" z="1.0" w="1.0"/>
        </patch>
      </primitive>

      <primitive id="rectangleNurb">
        <patch degree_u="1" parts_u="10" degree_v="1" parts_v="10" >
            <controlpoint x="-0.5" y="-0.5" z="0.0" w="1.0"/>
            <controlpoint x="-0.5" y="0.5" z="0.0" w="1.0"/>
            <controlpoint x="0.5" y="-0.5" z="0.0" w="1.0"/>
            <controlpoint x="0.5" y="0.5" z="0.0" w="1.0"/>
        </patch>
      </primitive>

      <primitive id="tentNurb">
        <patch degree_u="1" parts_u="10" degree_v="2" parts_v="10" >
            <controlpoint x="-0.5" y="-0.5" z="0.0" w="1.0"/>
            <controlpoint x="-0.5" y="0" z="1.5" w="1.0"/>
            <controlpoint x="-0.5" y="0.5" z="0.0" w="1.0"/>
            <controlpoint x="0.5" y="-0.5" z="0.0" w="1.0"/>
            <controlpoint x="0.5" y="0" z="1.5" w="1.0"/>
            <controlpoint x="0.5" y="0.5" z="0.0" w="1.0"/>
        </patch>
      </primitive>

      <primitive id="barrelSide">
        <patch degree_u="3" parts_u="10" degree_v="2" parts_v="10" >
          <controlpoint x="-1" y="-1" z="0" w="1.0"/>
          <controlpoint x="-1.5" y="0" z="0" w="1.0"/>
          <controlpoint x="-1" y="1" z="0" w="1.0"/>

          <controlpoint x="-1" y="-1" z="1.33333" w="1.0"/>
          <controlpoint x="-1.5" y="0" z="2" w="1.0"/>
          <controlpoint x="-1" y="1" z="1.33333" w="1.0"/>

          <controlpoint x="1" y="-1" z="1.33333" w="1.0"/>
          <controlpoint x="1.5" y="0" z="2" w="1.0"/>
          <controlpoint x="1" y="1" z="1.33333" w="1.0"/>

          <controlpoint x="1" y="-1" z="0.0" w="1.0"/>
          <controlpoint x="1.5" y="0" z="0.0" w="1.0"/>
          <controlpoint x="1" y="1" z="0.0" w="1.0"/>
        </patch>
      </primitive>

      <primitive id="circleNurb">
        <patch degree_u="3" parts_u="10" degree_v="1" parts_v="10" >
            <controlpoint x="-1" y="1" z="0.00001" w="1.0"/>
            <controlpoint x="-1" y="1" z="-0.00001" w="1.0"/>

            <controlpoint x="-1" y="1" z="1.33333" w="1.0"/>
            <controlpoint x="-1" y="1" z="-1.33333" w="1.0"/>
            
            <controlpoint x="1" y="1" z="1.33333" w="1.0"/>
            <controlpoint x="1" y="1" z="-1.33333" w="1.0"/>

            <controlpoint x="1" y="1" z="0.00001" w="1.0"/>
            <controlpoint x="1" y="1" z="-0.00001" w="1.0"/>

        </patch>
      </primitive>
      
      <primitive id="rectangle">
          <rectangle x1="-0.5" y1="-0.5" x2="0.5" y2="0.5" />
      </primitive>
      <primitive id="cylinder">
          <cylinder base="1" top="1" height="2" slices="16" stacks="8" />
      </primitive>
      <primitive id="sphere">
          <sphere radius="1" slices="32" stacks="32" />
      </primitive>
      <primitive id="torus">
          <torus inner="0.25" outer="2" slices="16" loops="40" />
      </primitive>
      <primitive id="torusCondensed">
          <torus inner="0.15" outer="0.3" slices="8" loops="20" />
      </primitive>
      <primitive id="adjustCornerTriangle">
          <triangle x1="0" y1="0" z1="0" x2="0" y2="0" z2="1" x3="1" y3="0" z3="0" />
      </primitive>
      <primitive id="frustum">
          <cylinder base="1" top="0.25" height="1" slices="16" stacks="8" />
      </primitive>
      <primitive id="frustum_smooth">
          <cylinder base="1" top="0.5" height="1" slices="16" stacks="8" />
      </primitive>
    </primitives>

    <animations>
        <keyframeanim id="barrelFallen">
            <keyframe instant="0">
                <translation x="0" y="0" z="0" />
                <rotation axis="z" angle="0" />
                <rotation axis="y" angle="0" />
                <rotation axis="x" angle="0" />
                <scale sx="1" sy="1" sz="1" />
            </keyframe>
            <keyframe instant="2">
                <translation x="0" y="0" z="0" />
                <rotation axis="z" angle="0" />
                <rotation axis="y" angle="0" />
                <rotation axis="x" angle="0" />
                <scale sx="1" sy="1" sz="1" />
            </keyframe>
            <keyframe instant="10">
                <translation x="0" y="0" z="0.5" />
                <rotation axis="z" angle="45" />
                <rotation axis="y" angle="90" />
                <rotation axis="x" angle="0" />
                <scale sx="1" sy="1" sz="1" />
            </keyframe>
            <keyframe instant="18">
                <translation x="0" y="0" z="0.5" />
                <rotation axis="z" angle="90" />
                <rotation axis="y" angle="180" />
                <rotation axis="x" angle="0" />
                <scale sx="1" sy="1" sz="1" />
            </keyframe>
        </keyframeanim>
    </animations>

    <components>
      <component id="feup">
          <transformation>
          </transformation>
          <materials>
              <material id="moon" />
          </materials>
          <texture id="test"/>
          <children>
              <!--<primitiveref id="patch1" />-->
              <!--<primitiveref id="patch2" />-->
              <!--<primitiveref id="patch3" />-->
              <!--<primitiveref id="patch4" />-->
              <!--<primitiveref id="barrelSide" />-->
              <componentref id="barrel"/>
          </children>
          <animation id="barrelFallen" />
      </component>

      <component id="topBarrel">
          <transformation>
          </transformation>
          <materials>
              <material id="inherit" />
          </materials>
          <texture id="inherit"/>
          <children>
              <!--<primitiveref id="patch1" />-->
              <!--<primitiveref id="patch2" />-->
              <!--<primitiveref id="patch3" />-->
              <!--<primitiveref id="patch4" />-->
              <primitiveref id="barrelSide"/>
              <primitiveref id="circleNurb"/>
          </children>
          <!--highlighted r="1" g="0" b="0" scale_h="2"/-->
      </component>
      <component id="bottomBarrel">
          <transformation>
            <rotate axis="x" angle="180" />
          </transformation>
        <materials>
          <material id="inherit" />
        </materials>
        <texture id="inherit" />
        <children>
          <componentref id="topBarrel"/>
        </children>
      </component>
      <component id="barrel">
          <transformation>
          </transformation>
          <materials>
              <material id="moon" />
          </materials>
          <texture id="test"/>
          <children>
            <componentref id="topBarrel"/>
            <componentref id="bottomBarrel"/>
          </children>
      </component>
    </components>
</sxs>
